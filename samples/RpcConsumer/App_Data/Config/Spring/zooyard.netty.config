<objects xmlns="http://www.springframework.net">

  <object id="loggingHandler" type="DotNetty.Handlers.Logging.LoggingHandler, DotNetty.Handlers">
  </object>
  <object id="lengthFieldPrepender" type="DotNetty.Codecs.LengthFieldPrepender, DotNetty.Codecs">
    <constructor-arg name="lengthFieldLength" value="4"/>
  </object>
  <object id="lengthFieldBasedFrameDecoder" type="DotNetty.Codecs.LengthFieldBasedFrameDecoder, DotNetty.Codecs">
    <!--int.MaxValue, 0, 4, 0, 4-->
    <constructor-arg name="maxFrameLength" expression="T(System.Int32).MaxValue"/>
    <constructor-arg name="lengthFieldOffset" value="0"/>
    <constructor-arg name="lengthFieldLength" value="4"/>
    <constructor-arg name="lengthAdjustment" value="0"/>
    <constructor-arg name="initialBytesToStrip" value="4"/>
  </object>
  
  <!--<object id="clientHandler" type="Zooyard.Rpc.NettyImpl.ClientHandler, Zooyard.Rpc.NettyImpl">
    <constructor-arg name="receviedAction" expression="#NettyClientPool.ReceivedMessage"/>
  </object>-->
  <object id="clientHandler" type="Zooyard.Rpc.NettyImpl.ClientHandler, Zooyard.Rpc.NettyImpl">
    <constructor-arg name="receviedAction" ref="receviedAction"/>
  </object>
  <object id="receviedAction" type="Spring.Objects.Factory.Config.DelegateFactoryObject">
    <property name="DelegateType" value="System.Action&lt;DotNetty.Transport.Channels.IChannelHandlerContext,Zooyard.Rpc.NettyImpl.TransportMessage&gt;" />
    <property name="TargetObject" ref="NettyClientPool"/>
    <property name="MethodName" value="ReceivedMessage" />
  </object>
  

  <object id="socket" type="Zooyard.Rpc.NettyImpl.NettyProtocol, Zooyard.Rpc.NettyImpl">
    <property name="EventLoopGroupType" expression="T(DotNetty.Transport.Channels.MultithreadEventLoopGroup, DotNetty.Transport)"></property>
    <property name="ChannelType" expression="T(DotNetty.Transport.Channels.Sockets.TcpSocketChannel, DotNetty.Transport)"> </property>
    <property name="ChannelHandlers">
      <list element-type="DotNetty.Transport.Channels.IChannelHandler, DotNetty.Transport">
        <ref object="loggingHandler"/>
        <ref object="lengthFieldPrepender"/>
        <ref object="lengthFieldBasedFrameDecoder"/>
        <ref object="clientHandler"/>
      </list>
    </property>
  </object>
  
  <object id="libuv" type="Zooyard.Rpc.NettyImpl.NettyProtocol, Zooyard.Rpc.NettyImpl">
    <property name="EventLoopGroupType" expression="T(DotNetty.Transport.Libuv.EventLoopGroup, DotNetty.Transport.Libuv)"></property>
    <property name="ChannelType" expression="T(DotNetty.Transport.Libuv.TcpChannel, DotNetty.Transport.Libuv)"> </property>
    <property name="ChannelHandlers">
      <list element-type="DotNetty.Transport.Channels.IChannelHandler, DotNetty.Transport">
        <ref object="loggingHandler"/>
        <ref object="lengthFieldPrepender"/>
        <ref object="lengthFieldBasedFrameDecoder"/>
        <ref object="clientHandler"/>
      </list>
    </property>
  </object>

  <!--<object id="ws" type="Zooyard.Rpc.NettyImpl.NettyProtocol, Zooyard.Rpc.NettyImpl">
    <property name="EventLoopGroupType" expression="T(DotNetty.Transport.Channels.MultithreadEventLoopGroup, DotNetty.Transport)"></property>
    <property name="ChannelType" expression="T(DotNetty.Transport.Channels.Sockets.TcpSocketChannel, DotNetty.Transport)"> </property>
    <property name="ChannelHandlers">
      <list element-type="DotNetty.Transport.Channels.IChannelHandler, DotNetty.Transport">
        <ref object="loggingHandler"/>
        <ref object="lengthFieldPrepender"/>
        <ref object="lengthFieldBasedFrameDecoder"/>
        <ref object="clientHandler"/>
      </list>
    </property>
  </object>

  <object id="ws_libuv" type="Zooyard.Rpc.NettyImpl.NettyProtocol, Zooyard.Rpc.NettyImpl">
    <property name="EventLoopGroupType" expression="T(DotNetty.Transport.Libuv.EventLoopGroup, DotNetty.Transport.Libuv)"></property>
    <property name="ChannelType" expression="T(DotNetty.Transport.Libuv.TcpChannel, DotNetty.Transport.Libuv)"> </property>
    <property name="ChannelHandlers">
      <list element-type="DotNetty.Transport.Channels.IChannelHandler, DotNetty.Transport">
        <ref object="loggingHandler"/>
        <ref object="lengthFieldPrepender"/>
        <ref object="lengthFieldBasedFrameDecoder"/>
        <ref object="clientHandler"/>
      </list>
    </property>
  </object>-->
  
  <object id="NettyClientPool" type="Zooyard.Rpc.NettyImpl.NettyClientPool, Zooyard.Rpc.NettyImpl">
    
    <property name="NettyProtocol">
      <dictionary key-type="string" value-type="Zooyard.Rpc.NettyImpl.NettyProtocol, Zooyard.Rpc.NettyImpl">
        <entry key="socket" value-ref="socket"/>
        <entry key="libuv" value-ref="libuv"/>
      </dictionary>
    </property>
  </object>
  
</objects>